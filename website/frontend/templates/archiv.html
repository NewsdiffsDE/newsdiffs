{% extends 'headerfooter.html' %}
{% load url from future %}
{% block css_import %}
<link href="{% url 'static' 'css/custom-article-list.css' %}" rel="stylesheet" type="text/css">
{% endblock %}

{% block title %}Suchergebnisse{% endblock %}
{% block active_entdecken %}class="active"{% endblock %}

{% block content %}

<!-- Begin page content -->
<div class="container-fluid maincontent">
    {% include "searchbar.html" %}

    <!-- Breadcrumbs -->
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <ol class="breadcrumb">
                <li><a href="index.html">Suche</a></li>
                <li class="active">Archiv</li>
            </ol>
        </div>
    </div>

    <div class="row" id="sort-btn-row">

        <div class="col-md-2 col-md-offset-2">
            <button id="sort-btn" class="btn btn-default" data-toggle="collapse" data-target="#allfilters">
                Sortieren & Filtern anzeigen
            </button>
        </div>
    </div>


    <div class="row">
        {% include "subtemplates/filters.html" %}


        <!-- Suchergebnisse -->
        <div class="col-md-6">

            <h1>Archiv vom {{archive_date}}</h1>
            {% if articles|length > 0 %}
            {% include "subtemplates/pager.html" %}
            <p>Filter:
                {% if source in all_sources %}
                <span class="label label-default">Quelle: {{source}}
                    <a href="{% url 'archive' %}?sort={{sort}}&ressort={{ressort}}?date={{archive_date}}">
                        X
                    </a>
                </span>
                {% endif %}
                {% if ressort in all_ressorts %}
                <span class="label label-default">Ressort: {{ressort}}
                    <a href="{% url 'archive' %}?source={{source}}&sort={{sort}}?date={{archive_date}}">
                        X
                    </a>
                </span>
                {% endif %}
            </p>

            <div class="table">
                <table class="table table-condensed table-striped">
                    <thead>
                    <tr>
                        <th>Artikel</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for id, article in articles.items %}

                    <tr>
                        <td>
                            <em>{{ forloop.counter0|add:begin_at }}. Ergebnis | Anzahl der Änderungen: {{article.versioncount}} |
                                Quelle: (<a href="{{ article.url }}" target="_blank">{{ article.source }}</a>) |
                                Ressort: {{article.ressort}}
                            </em>

                            <h3>
                                {{ article.title }} (<a href="{{ article.url }}" target="_blank">{{ article.source}}</a>)
                            </h3>

                            <p>
                                <a class="no-link-color" href="article_history.html">
                                    <img class="ownbtn" src="../static/images/Icon_Artikelverlauf.png"
                                         alt="Artikelverlauf-Icon">
                                </a>
                                <a href="{% url 'article_history' %}?id={{article.id}}">Änderungsübersicht
                                    ({{article.versioncount}})</a>
                            </p>

                            <p><a href="{% url 'diffview' %}"><img class="ownbtn"
                                                                   src="../static/images/Icon_Vergleichen.png"
                                                                   alt="Vergleichen-Icon">neueste Änderung</a></p>
                        </td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% include "subtemplates/pager.html" %}
                 {%else%}
                <p>Keine Artikel gefunden für Seite {{page}}</p>
                {%endif%}
            </div>
            <!-- /.table -->
        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->
</div>
<!-- /.container-fluid -->

{% endblock %}

